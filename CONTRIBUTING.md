# ü§ù Gu√≠a de Contribuci√≥n

¬°Gracias por tu inter√©s en contribuir a BuildFabricModServer! Esta gu√≠a te ayudar√° a empezar y asegurar que tu contribuci√≥n sea valiosa para el proyecto.

## üìã Tabla de Contenidos

- [C√≥digo de Conducta](#-c√≥digo-de-conducta)
- [¬øC√≥mo puedo contribuir?](#-c√≥mo-puedo-contribuir)
- [Proceso de Desarrollo](#-proceso-de-desarrollo)
- [Estilo de C√≥digo](#-estilo-de-c√≥digo)
- [Testing](#-testing)
- [Documentaci√≥n](#-documentaci√≥n)
- [Pull Requests](#-pull-requests)
- [Issues](#-issues)

## üìú C√≥digo de Conducta

Este proyecto adhiere al [C√≥digo de Conducta](CODE_OF_CONDUCT.md). Al participar, se espera que mantengas este c√≥digo. Por favor reporta comportamientos inaceptables a [maintainer@example.com].

## üéØ ¬øC√≥mo puedo contribuir?

### üêõ Reportando Bugs

Antes de crear un issue:
- ‚úÖ Busca en [issues existentes](../../issues) para evitar duplicados
- ‚úÖ Lee la [documentaci√≥n](README.md) y [gu√≠as de troubleshooting](docs/)
- ‚úÖ Intenta reproducir el problema en una instalaci√≥n limpia

Usa el [template de bug report](../../issues/new?template=bug_report.yml) que incluye:
- Descripci√≥n clara del problema
- Pasos para reproducir
- Comportamiento esperado vs actual
- Informaci√≥n del sistema
- Logs relevantes

### ‚ú® Sugiriendo Mejoras

Para nuevas caracter√≠sticas o mejoras:
- ‚úÖ Revisa [issues existentes](../../issues) y [discusiones](../../discussions)
- ‚úÖ Considera si la caracter√≠stica beneficia a la mayor√≠a de usuarios
- ‚úÖ Usa el [template de feature request](../../issues/new?template=feature_request.yml)

### üîß Contribuyendo C√≥digo

Areas donde necesitamos ayuda:
- **Scripts de optimizaci√≥n**: Mejoras para diferentes distribuciones
- **Documentaci√≥n**: Gu√≠as, tutoriales, traducciones
- **Testing**: Pruebas en diferentes arquitecturas y sistemas
- **Docker**: Optimizaciones de contenedores
- **Monitoreo**: M√©tricas adicionales y dashboards
- **Seguridad**: Auditor√≠as y mejoras de seguridad

## üõ†Ô∏è Proceso de Desarrollo

### 1. Fork y Clone

```bash
# Fork el repositorio en GitHub, luego:
git clone https://github.com/TU_USERNAME/BuildFabricModServer.git
cd BuildFabricModServer

# Agregar upstream remote
git remote add upstream https://github.com/ORIGINAL_USERNAME/BuildFabricModServer.git
```

### 2. Crear Branch

```bash
# Actualizar main
git checkout main
git pull upstream main

# Crear branch para tu feature/fix
git checkout -b feature/nombre-descriptivo
# o
git checkout -b fix/descripcion-del-bug
```

### 3. Hacer Cambios

- ‚úÖ Sigue las [convenciones de estilo](#-estilo-de-c√≥digo)
- ‚úÖ Agrega tests si es aplicable
- ‚úÖ Actualiza documentaci√≥n
- ‚úÖ Prueba tus cambios localmente

### 4. Commit

```bash
# Agregar archivos
git add .

# Commit con mensaje descriptivo
git commit -m "tipo(scope): descripci√≥n breve

Explicaci√≥n m√°s detallada si es necesario.

- Cambio espec√≠fico 1
- Cambio espec√≠fico 2

Fixes #123"
```

#### Convenciones de Commit

Usar formato: `tipo(scope): descripci√≥n`

**Tipos:**
- `feat`: Nueva caracter√≠stica
- `fix`: Correcci√≥n de bug
- `docs`: Solo documentaci√≥n
- `style`: Cambios de formato (no afectan funcionalidad)
- `refactor`: Refactoring de c√≥digo
- `test`: Agregar o corregir tests
- `chore`: Tareas de mantenimiento

**Scopes:**
- `install`: Script de instalaci√≥n
- `docker`: Archivos Docker
- `optimize`: Scripts de optimizaci√≥n
- `monitor`: Sistema de monitoreo
- `benchmark`: Suite de benchmarking
- `config`: Configuraciones
- `docs`: Documentaci√≥n

**Ejemplos:**
```bash
git commit -m "feat(docker): add multi-stage build optimization"
git commit -m "fix(install): resolve Java detection on ARM systems"
git commit -m "docs(api): add configuration examples"
```

### 5. Push y Pull Request

```bash
# Push branch
git push origin feature/nombre-descriptivo

# Crear Pull Request en GitHub
# Usar el template proporcionado
```

## üìù Estilo de C√≥digo

### Shell Scripts

#### Convenciones Generales

```bash
#!/bin/bash

# Header con informaci√≥n del script
#=============================================================================
# üéØ Nombre del Script
# Versi√≥n: X.X
# Descripci√≥n: Breve descripci√≥n de la funcionalidad
# Autor: Contributor Name
#=============================================================================

# Modo estricto SIEMPRE
set -euo pipefail

# Colores para output consistentes
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m'

# Funciones de logging est√°ndar
log() {
    echo -e "${GREEN}[$(date +'%Y-%m-%d %H:%M:%S')]${NC} $1"
}

warn() {
    echo -e "${YELLOW}[WARNING]${NC} $1"
}

error() {
    echo -e "${RED}[ERROR]${NC} $1"
    exit 1
}
```

#### Mejores Pr√°cticas

1. **Variables:**
   ```bash
   # Usar may√∫sculas para constantes
   readonly SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
   readonly DEFAULT_VERSION="1.20.4"
   
   # Usar min√∫sculas para variables locales
   local user_input=""
   local temp_file="/tmp/script_temp.$$"
   ```

2. **Funciones:**
   ```bash
   # Nombrar descriptivamente
   check_prerequisites() {
       local required_tools=("java" "wget" "curl")
       
       for tool in "${required_tools[@]}"; do
           if ! command -v "$tool" &> /dev/null; then
               error "Required tool not found: $tool"
           fi
       done
   }
   ```

3. **Manejo de Errores:**
   ```bash
   # Siempre verificar c√≥digos de salida
   if ! wget "$url" -O "$output_file"; then
       error "Failed to download: $url"
   fi
   
   # Usar || para alternativas
   java -version || error "Java not installed"
   ```

4. **Documentaci√≥n:**
   ```bash
   # Documentar funciones complejas
   #
   # Instala Fabric Server con la versi√≥n especificada
   # 
   # Args:
   #   $1: Versi√≥n de Minecraft
   #   $2: Versi√≥n de Fabric
   #   $3: Directorio de instalaci√≥n
   #
   # Returns:
   #   0: Instalaci√≥n exitosa
   #   1: Error en descarga
   #   2: Error en instalaci√≥n
   #
   install_fabric_server() {
       local minecraft_version="$1"
       local fabric_version="$2" 
       local install_dir="$3"
       
       # Implementaci√≥n...
   }
   ```

### Docker

#### Dockerfile

```dockerfile
# Usar imagen base espec√≠fica, no 'latest'
FROM openjdk:17-jdk-alpine3.18

# Metadata
LABEL maintainer="BuildFabricModServer"
LABEL description="Optimized Minecraft Fabric Server"
LABEL version="1.0.0"

# Variables de construcci√≥n al inicio
ARG MINECRAFT_VERSION=1.20.4
ARG FABRIC_VERSION=0.15.6

# Variables de entorno
ENV MINECRAFT_VERSION=${MINECRAFT_VERSION}
ENV FABRIC_VERSION=${FABRIC_VERSION}

# Crear usuario no-root ANTES de instalar paquetes
RUN addgroup -g 1000 minecraft && \
    adduser -D -s /bin/sh -u 1000 -G minecraft minecraft

# Instalar paquetes en una sola capa
RUN apk add --no-cache \
    curl \
    wget \
    bash \
    && rm -rf /var/cache/apk/*

# Cambiar a usuario no-root temprano
USER minecraft
WORKDIR /opt/minecraft/server

# Copiar y ejecutar scripts
COPY --chown=minecraft:minecraft scripts/ ./scripts/
RUN chmod +x scripts/*.sh

# Healthcheck
HEALTHCHECK --interval=30s --timeout=10s --start-period=60s --retries=3 \
    CMD ./scripts/healthcheck.sh

# Comando por defecto
CMD ["./scripts/start-server.sh"]
```

#### docker-compose.yml

```yaml
version: '3.8'

services:
  minecraft-server:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        MINECRAFT_VERSION: "1.20.4"
        FABRIC_VERSION: "0.15.6"
    
    container_name: minecraft-fabric-server
    hostname: minecraft-server
    
    restart: unless-stopped
    
    environment:
      - EULA=false  # Usuario debe cambiar expl√≠citamente
      - SERVER_PORT=25565
      - MAX_PLAYERS=20
    
    ports:
      - "25565:25565"
    
    volumes:
      # Usar nombres descriptivos
      - minecraft_world_data:/opt/minecraft/server/world
      - minecraft_mods_data:/opt/minecraft/server/mods
    
    # L√≠mites de recursos
    deploy:
      resources:
        limits:
          memory: 4G
          cpus: '2.0'
        reservations:
          memory: 2G
          cpus: '1.0'
    
    networks:
      - minecraft_network

volumes:
  minecraft_world_data:
    driver: local
  minecraft_mods_data:
    driver: local

networks:
  minecraft_network:
    driver: bridge
```

### Documentaci√≥n

#### Markdown

1. **Estructura:**
   ```markdown
   # üéØ T√≠tulo Principal
   
   Descripci√≥n breve y clara.
   
   ## üìã Tabla de Contenidos
   
   - [Secci√≥n 1](#-secci√≥n-1)
   - [Secci√≥n 2](#-secci√≥n-2)
   
   ## üöÄ Secci√≥n 1
   
   Contenido...
   
   ### Subsecci√≥n
   
   M√°s contenido...
   ```

2. **Ejemplos de C√≥digo:**
   ```markdown
   # Usar bloques de c√≥digo con sintaxis highlighting
   
   ```bash
   # Comentario explicativo
   ./script.sh --option value
   ```
   
   # Para comandos inline usar backticks
   Ejecuta `systemctl status minecraft-fabric` para ver el estado.
   ```

3. **Enlaces y Referencias:**
   ```markdown
   # Enlaces internos
   Ver [Documentaci√≥n de API](docs/API.md) para m√°s detalles.
   
   # Enlaces externos
   Consulta la [documentaci√≥n oficial de Fabric](https://fabricmc.net/).
   
   # Im√°genes
   ![Diagrama de arquitectura](docs/images/architecture.png)
   ```

## üß™ Testing

### Pruebas Locales

Antes de enviar un PR, ejecuta:

```bash
# 1. Validar sintaxis de scripts
find . -name "*.sh" -exec shellcheck {} \;

# 2. Validar archivos Docker
hadolint Dockerfile
docker-compose config -q

# 3. Pruebas b√°sicas de instalaci√≥n
# En una VM o contenedor limpio:
./install.sh --help
./update-server.sh --help
./benchmark.sh --help

# 4. Construir imagen Docker
docker build -t test-image .
docker run --rm test-image --help
```

### Testing en CI

El proyecto usa GitHub Actions para testing autom√°tico:
- ‚úÖ Validaci√≥n de sintaxis (shellcheck, hadolint)
- ‚úÖ Pruebas multi-arquitectura (AMD64, ARM64)
- ‚úÖ Pruebas de instalaci√≥n en m√∫ltiples OS
- ‚úÖ Scans de seguridad
- ‚úÖ Validaci√≥n de documentaci√≥n

### Escribir Tests

Para funcionalidades nuevas, considera agregar:

```bash
# tests/test_install.sh
#!/bin/bash

test_prerequisites_check() {
    # Setup
    export PATH="/fake/path:$PATH"
    
    # Test
    if ./install.sh --dry-run 2>&1 | grep -q "Java not found"; then
        echo "‚úÖ Prerequisites check works"
        return 0
    else
        echo "‚ùå Prerequisites check failed"
        return 1
    fi
}

# Ejecutar test
test_prerequisites_check
```

## üìö Documentaci√≥n

### Actualizar Documentaci√≥n

Al hacer cambios, actualiza:

1. **README.md**: Para cambios en funcionalidad principal
2. **docs/API.md**: Para cambios en interfaces/configuraciones
3. **docs/ARCHITECTURE.md**: Para cambios arquitect√≥nicos
4. **Comentarios en c√≥digo**: Para l√≥gica compleja
5. **Templates**: Si cambias el proceso de issues/PRs

### Estilo de Documentaci√≥n

- **Ser claro y conciso**
- **Usar ejemplos pr√°cticos**
- **Incluir casos de error comunes**
- **Mantener actualizada con cambios de c√≥digo**
- **Usar emojis consistentemente para categorizaci√≥n**

## üîÄ Pull Requests

### Antes de Enviar

Checklist:
- [ ] ‚úÖ Branch actualizado con main
- [ ] ‚úÖ Tests pasan localmente
- [ ] ‚úÖ Documentaci√≥n actualizada
- [ ] ‚úÖ Commit messages siguiendo convenciones
- [ ] ‚úÖ Sin archivos innecesarios (logs, temporales)
- [ ] ‚úÖ Cambios probados en sistema limpio

### Template de PR

Completa el [template de Pull Request](../../pull_request_template.md):
- **Descripci√≥n clara** de los cambios
- **Tipo de cambio** (feature, fix, docs, etc.)
- **Testing realizado**
- **Screenshots** si es relevante
- **Issues relacionados**

### Proceso de Review

1. **Automated checks** deben pasar
2. **Maintainer review** de c√≥digo y funcionalidad
3. **Testing** en diferentes entornos si es necesario
4. **Approval** y merge

### Despu√©s del Merge

- Branch ser√° borrado autom√°ticamente
- Changes aparecer√°n en pr√≥ximo release
- Contributor ser√° agregado a credits

## üêõ Issues

### Triaging

Labels usados:
- **Tipo**: `bug`, `enhancement`, `documentation`, `question`
- **Prioridad**: `priority-high`, `priority-medium`, `priority-low`
- **Estado**: `status-needs-info`, `status-blocked`, `status-ready`
- **√Årea**: `area-docker`, `area-install`, `area-optimization`

### Lifecycle de Issues

1. **Nuevo issue** ‚Üí Automatic labeling
2. **Triage** ‚Üí Maintainer review y labeling
3. **Ready** ‚Üí Disponible para contributors
4. **In Progress** ‚Üí Asignado y en desarrollo
5. **Review** ‚Üí PR creado y en review
6. **Closed** ‚Üí Completado o resuelto

## üèÜ Reconocimiento

### Contributors

Todos los contributors son reconocidos en:
- **README.md** - Lista de contributors
- **CHANGELOG.md** - Cr√©ditos por release
- **GitHub Releases** - Mention en release notes

### Tipos de Contribuci√≥n

Reconocemos todas las formas de contribuci√≥n:
- üíª **C√≥digo**
- üìñ **Documentaci√≥n** 
- üé® **Dise√±o**
- üí° **Ideas y feedback**
- üêõ **Bug reports**
- üí¨ **Community support**
- üåç **Traducci√≥n**
- üß™ **Testing**

## üìû Contacto

¬øPreguntas sobre contribuir?
- üí¨ [GitHub Discussions](../../discussions)
- üìß Email: [maintainer@example.com]
- üêõ [Issues](../../issues) para bugs y features

## üìñ Recursos Adicionales

- [Gu√≠a de Inicio R√°pido](docs/QUICK_START.md)
- [Documentaci√≥n de API](docs/API.md)
- [Arquitectura del Sistema](docs/ARCHITECTURE.md)
- [Fabric Documentation](https://fabricmc.net/wiki/)
- [Docker Best Practices](https://docs.docker.com/develop/dev-best-practices/)

---

¬°Gracias por hacer BuildFabricModServer mejor para todos! üéâ